"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[411],{7707:(e,t,n)=>{n.d(t,{F:()=>c});var r=n(6540);const a={plug:{width:"25px"}};var i=n(9067),c=function(){return r.createElement(i.A,{sx:a.plug})}},9119:(e,t,n)=>{n.d(t,{T:()=>l});var r=n(9067),a=n(6540),i=n(3222),c=n(7707),u=n(8890);const o={imagesComponent:{width:"100%",display:"flex",justifyContent:"center",alignItems:"flex-start"},image:{width:"100%"},imageLine:{width:"38.19820590666498%"}};var s=n(2458),l=function(e){var t=e.images,n=e.children,l=(0,a.useState)(null),f=l[0],m=l[1],d=function(e){m((function(t){return+e.target.id}))};return a.createElement(r.A,{sx:o.imagesComponent},f?a.createElement(u.Ai,{sx:{flexDirection:"column"}},a.createElement(i.z,{onArrowBackClickCallback:function(){m((function(e){return null}))}},a.createElement(c.F,null),a.createElement(c.F,null)),a.createElement(s.Y,{images:t,idOfSelected:f})):a.createElement(u.Ai,{sx:{flexDirection:"column"}},n,a.createElement(u.qM,{sx:{flexWrap:"wrap"}},t&&t.map((function(e){return a.createElement(r.A,{key:e.id,sx:{width:{lg:"18vw",xs:"33vw"},height:{lg:"18vw",xs:"33vw"},margin:{lg:"1vw"}}},a.createElement("img",{onClick:d,id:e.id,style:o.image,src:"https://memories-3-ov6w.onrender.com/"+e.src}))})))))}},2458:(e,t,n)=>{n.d(t,{Y:()=>g});var r=n(6540),a=n(3288),i=n(5834),c=n(9753),u=n(1467),o=n(8890),s=n(4745),l=function(){return l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},l.apply(this,arguments)},f={},m={},d={},g=(0,r.memo)((function(e){var t=e.images,n=e.idOfSelected,g=e.onScrollHomePageFunc,p=(0,r.useState)(t),h=p[0],v=p[1],w=(0,a.o)(null),E=w.data,y=w.isLoading,F=w.error,b=(0,a.G$)()[0],S=(0,c.j)();(0,r.useEffect)((function(){F&&S((0,i.g)(F.data.message))}),[F]),(0,r.useEffect)((function(){S(y?(0,i.F6)(!0):(0,i.F6)(!1))}),[y]),(0,r.useEffect)((function(){E&&E.forEach((function(e){m[e.name]=e.rating}))}),[E]),(0,r.useEffect)((function(){v((function(e){return t}))}),[t]);var x=window.innerHeight,O=null,k={},C=(0,r.useCallback)((function(e,t,n){k[e]=t,n&&(O=n)}),[]),I=null,j=0,A=0,B=(0,r.useCallback)((function(){var e,t=Math.round((A-j)/1e3);if(d){var n=d[I]||0;d=l(l({},d),((e={})[I]=n+t,e))}}),[]);(0,r.useEffect)((function(){h&&h.length&&h.forEach((function(e){f[e.id]=e.tags.map((function(e){return e.name}))}))}),[h]);var P=(0,u.Sx)()[0];(0,r.useEffect)((function(){return window.onscroll=function(){g&&g();for(var e=window.scrollY+x/2,t=0,n=Object.entries(k);t<n.length;t++){var r=n[t],a=r[0],i=r[1];Math.abs(e-i)<O/2&&I!==+a&&(null===I?(I=+a,j=Date.now()):(A=Date.now(),B(),I=+a,j=Date.now()))}},function(){Object.keys(d).forEach((function(e){f[e].forEach((function(t){m[t]||(m[t]=0),m[t]=m[t]+d[e]}))}));var e=[];Object.entries(m).forEach((function(t){e.push({name:t[0],rating:t[1]})})),S((0,i.F6)(!0)),b({preferences:e,isFirstTime:!1}).unwrap().catch((function(e){return S((0,i.g)(e.data.message))})),S((0,i.F6)(!1));var t=Object.keys(d).map((function(e){return+e}));S((0,i.F6)(!0)),P({imagesIds:t}).unwrap().then((function(){return S((0,i.F6)(!1))}))}}),[]);var D=(0,u.wc)()[0],L=(0,u.D8)()[0],N=(0,u.nH)()[0],T=(0,u.Ws)()[0],H=(0,u.Fj)()[0],J=(0,u.UK)()[0],z=function(e,t){"Save"===t?(S((0,i.F6)(!0)),D({imageId:e}).unwrap().then((function(t){v((function(t){var n=JSON.parse(JSON.stringify(h));return n.forEach((function(t){t.id===e&&(t.isSaved=!0)})),n}))})).catch((function(e){return S((0,i.g)(e.data.message))})),S((0,i.F6)(!1))):"Unsave"===t?(S((0,i.F6)(!0)),L({imageId:e}).unwrap().then((function(t){v((function(t){var n=JSON.parse(JSON.stringify(h));return n.forEach((function(t){t.id===e&&(t.isSaved=!1)})),n}))})).catch((function(e){return S((0,i.g)(e.data.message))})),S((0,i.F6)(!1))):"Hide"===t?(S((0,i.F6)(!0)),N({imageId:e}).unwrap().then((function(t){v((function(t){return t.filter((function(t){return t.id!==e}))}))})).catch((function(e){return S((0,i.g)(e.data.message))})),S((0,i.F6)(!1))):"Delete"===t?(S((0,i.F6)(!0)),T({imageId:e}).unwrap().then((function(t){v((function(t){return t.filter((function(t){return t.id!==e}))}))})).catch((function(e){return S((0,i.g)(e.data.message))})),S((0,i.F6)(!1))):"Not interested"===t?(S((0,i.F6)(!0)),H({imageId:e}).unwrap().then((function(){v((function(t){return t.filter((function(t){return t.id!==e}))}))})).catch((function(e){return S((0,i.g)(e.data.message))})),S((0,i.F6)(!1))):"Show"===t&&(S((0,i.F6)(!0)),J({imageId:e}),S((0,i.F6)(!1)))};return r.createElement(o.J,null,h&&h.map((function(e){return r.createElement(s._,{key:e.id,menuOptionsHandlerCallback:z,setImagePosition:C,idOfSelected:n,authorId:e.authorId,authorName:e.authorName,isOwn:e.isOwn,avatar:e.avatar,id:e.id,createdAt:e.createdAt,numberOfViews:e.numberOfViews,src:e.src,isLiked:e.isLiked,description:e.description,tags:e.tags,numberOfComments:e.numberOfComments,numberOfLikes:e.numberOfLikes,isPrivate:e.isPrivate,isSaved:e.isSaved})})))}))},3216:(e,t,n)=>{n.d(t,{F:()=>c});var r=n(6540),a=n(4540);const i={extra:{width:"35px"}};var c=function(e){var t=e.isSortingByPopularity,n=e.sortByToggleCallback;return r.createElement("div",{onClick:function(){n(t?"date":"popularity")}},t?r.createElement("div",{title:"Sort images by date"},r.createElement(a.p,{type:"star",extra:i.extra})):r.createElement("div",{title:"Sort images by popularity"},r.createElement(a.p,{type:"date",extra:i.extra})))}},1411:(e,t,n)=>{n.r(t),n.d(t,{default:()=>w});var r=n(4073),a=n(6540),i=n(8106),c=n(1469),u=n(9067),o=n(3216);const s={headerCenter:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"}};var l=function(e){var t=e.numberOf,n=e.isSortingByPopularity,i=e.sortByToggleCallback,c=e.children;return a.createElement(u.A,{sx:s.headerCenter},c,a.createElement(r.A,{variant:"body2"},t),a.createElement(o.F,{isSortingByPopularity:n,sortByToggleCallback:i}))},f=n(3222),m=n(7707),d=n(9119),g=n(5834),p=n(9753),h=n(5157);const v={tag:{fontSize:"30px"}},w=function(){var e=(0,a.useState)({count:"0",rows:[]}),t=e[0],n=e[1],u=(0,a.useState)({count:"0",rows:[]}),o=u[0],s=u[1],w=(0,a.useState)({count:"0",rows:[]}),E=w[0],y=w[1],F=(0,a.useState)(!1),b=F[0],S=F[1],x=+(0,i.g)().id.slice(1),O=(0,i.g)().name.slice(1),k=(0,p.j)(),C=(0,h.L)()[0];return(0,a.useEffect)((function(){k((0,g.F6)(!0)),C({tagId:x,sortBy:"date"}).unwrap().then((function(e){s((function(t){return e})),n((function(t){return e}))})).catch((function(e){return k((0,g.g)(e.data.message))})),k((0,g.F6)(!1))}),[]),a.createElement(c.R,null,a.createElement(d.T,{images:t.rows},a.createElement(f.z,null,a.createElement(m.F,null),a.createElement(m.F,null)),a.createElement(l,{numberOf:t.count,isSortingByPopularity:b,sortByToggleCallback:function(e){"date"===e?n((function(e){return o})):E.rows.length?n((function(e){return E})):(k((0,g.F6)(!0)),C({tagId:x,sortBy:"popularity"}).unwrap().then((function(e){y((function(t){return e})),n((function(t){return e}))})),k((0,g.F6)(!1))),S((function(e){return!e}))}},a.createElement(r.A,{sx:v.tag,variant:"body2"},"#",O))))}}}]);