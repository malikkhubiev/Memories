"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[411],{3222:(e,t,n)=>{n.d(t,{z:()=>f});var r=n(6540),a=n(8106),i=n(4540),c=n(8890),u=n(7707);const o={pageHeader:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",transition:"0.5s",zIndex:5e3},fixedPageHeader:{top:0,left:0,position:"fixed",transform:"translateY(-150%)"},visibleHeader:{transform:"translateY(0)"},back:{cursor:"pointer"},stack:{width:"100%",padding:{md:"25px 45px",xs:"25px"}}};var s=n(9067),l=function(){return l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},l.apply(this,arguments)},f=function(e){var t=e.children,n=e.onArrowBackClickCallback,f=e.isShowing,d=(0,r.useState)(!1),m=d[0],g=d[1],p=(0,r.useState)(!0),h=p[0],v=p[1],w=(0,a.Zp)(),E=(0,a.zy)(),y=0;(0,r.useEffect)((function(){!1!==f&&(window.onscroll=function(){var e=window.scrollY;if(0===e)return g((function(e){return!1}));g((function(e){return!0})),v(e>y?function(e){return!1}:function(e){return!0}),y=e})}),[]);var x=o.pageHeader;return m&&(x=l(l({},x),o.fixedPageHeader)),h&&(x=l(l({},x),o.visibleHeader)),r.createElement(s.A,{sx:x},r.createElement(c.Ai,{sx:o.stack},"/"===E.pathname?r.createElement(u.F,null):r.createElement(s.A,{sx:o.back,onClick:function(){n?n():w(-1)}},r.createElement(i.p,{type:"arrow_back"})),t))}},7707:(e,t,n)=>{n.d(t,{F:()=>c});var r=n(6540);const a={plug:{width:"25px"}};var i=n(9067),c=function(){return r.createElement(i.A,{sx:a.plug})}},9119:(e,t,n)=>{n.d(t,{T:()=>l});var r=n(9067),a=n(6540),i=n(3222),c=n(7707),u=n(8890);const o={imagesComponent:{width:"100%",display:"flex",justifyContent:"center",alignItems:"flex-start"},image:{width:"100%"},imageLine:{width:"38.19820590666498%"}};var s=n(2458),l=function(e){var t=e.images,n=e.children,l=(0,a.useState)(null),f=l[0],d=l[1],m=function(e){d((function(t){return+e.target.id}))};return a.createElement(r.A,{sx:o.imagesComponent},f?a.createElement(u.Ai,{sx:{flexDirection:"column"}},a.createElement(i.z,{onArrowBackClickCallback:function(){d((function(e){return null}))}},a.createElement(c.F,null),a.createElement(c.F,null)),a.createElement(s.Y,{images:t,idOfSelected:f})):a.createElement(u.Ai,{sx:{flexDirection:"column"}},n,a.createElement(u.qM,{sx:{flexWrap:"wrap"}},t&&t.map((function(e){return a.createElement(r.A,{key:e.id,sx:{width:{lg:"18vw",xs:"33vw"},height:{lg:"18vw",xs:"33vw"},margin:{lg:"1vw"}}},a.createElement("img",{onClick:m,id:e.id,style:o.image,src:"https://memories-208s.onrender.com"+e.src}))})))))}},2458:(e,t,n)=>{n.d(t,{Y:()=>g});var r=n(6540),a=n(3288),i=n(5834),c=n(9753),u=n(1467),o=n(8890),s=n(4745),l=function(){return l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},l.apply(this,arguments)},f={},d={},m={},g=(0,r.memo)((function(e){var t=e.images,n=e.idOfSelected,g=e.onScrollHomePageFunc,p=(0,r.useState)(t),h=p[0],v=p[1],w=(0,a.o)(null),E=w.data,y=w.isLoading,x=w.error,b=(0,a.G$)()[0],k=(0,c.j)();(0,r.useEffect)((function(){x&&k((0,i.g)(x.data.message))}),[x]),(0,r.useEffect)((function(){k(y?(0,i.F6)(!0):(0,i.F6)(!1))}),[y]),(0,r.useEffect)((function(){E&&E.forEach((function(e){d[e.name]=e.rating}))}),[E]),(0,r.useEffect)((function(){v((function(e){return t}))}),[t]);var F=window.innerHeight,S=null,O={},C=(0,r.useCallback)((function(e,t,n){O[e]=t,n&&(S=n)}),[]),I=null,A=0,j=0,B=(0,r.useCallback)((function(){var e,t=Math.round((j-A)/1e3);if(m){var n=m[I]||0;m=l(l({},m),((e={})[I]=n+t,e))}}),[]);(0,r.useEffect)((function(){h&&h.length&&h.forEach((function(e){f[e.id]=e.tags.map((function(e){return e.name}))}))}),[h]);var P=(0,u.Sx)()[0];(0,r.useEffect)((function(){return window.onscroll=function(){g&&g();for(var e=window.scrollY+F/2,t=0,n=Object.entries(O);t<n.length;t++){var r=n[t],a=r[0],i=r[1];Math.abs(e-i)<S/2&&I!==+a&&(null===I?(I=+a,A=Date.now()):(j=Date.now(),B(),I=+a,A=Date.now()))}},function(){Object.keys(m).forEach((function(e){f[e].forEach((function(t){d[t]||(d[t]=0),d[t]=d[t]+m[e]}))}));var e=[];Object.entries(d).forEach((function(t){e.push({name:t[0],rating:t[1]})})),k((0,i.F6)(!0)),b({preferences:e,isFirstTime:!1}).unwrap().catch((function(e){return k((0,i.g)(e.data.message))})),k((0,i.F6)(!1));var t=Object.keys(m).map((function(e){return+e}));k((0,i.F6)(!0)),P({imagesIds:t}).unwrap().then((function(){return k((0,i.F6)(!1))}))}}),[]);var H=(0,u.wc)()[0],D=(0,u.D8)()[0],L=(0,u.nH)()[0],N=(0,u.Ws)()[0],T=(0,u.Fj)()[0],z=(0,u.UK)()[0],Y=function(e,t){"Save"===t?(k((0,i.F6)(!0)),H({imageId:e}).unwrap().then((function(t){v((function(t){var n=JSON.parse(JSON.stringify(h));return n.forEach((function(t){t.id===e&&(t.isSaved=!0)})),n}))})).catch((function(e){return k((0,i.g)(e.data.message))})),k((0,i.F6)(!1))):"Unsave"===t?(k((0,i.F6)(!0)),D({imageId:e}).unwrap().then((function(t){v((function(t){var n=JSON.parse(JSON.stringify(h));return n.forEach((function(t){t.id===e&&(t.isSaved=!1)})),n}))})).catch((function(e){return k((0,i.g)(e.data.message))})),k((0,i.F6)(!1))):"Hide"===t?(k((0,i.F6)(!0)),L({imageId:e}).unwrap().then((function(t){v((function(t){return t.filter((function(t){return t.id!==e}))}))})).catch((function(e){return k((0,i.g)(e.data.message))})),k((0,i.F6)(!1))):"Delete"===t?(k((0,i.F6)(!0)),N({imageId:e}).unwrap().then((function(t){v((function(t){return t.filter((function(t){return t.id!==e}))}))})).catch((function(e){return k((0,i.g)(e.data.message))})),k((0,i.F6)(!1))):"Not interested"===t?(k((0,i.F6)(!0)),T({imageId:e}).unwrap().then((function(){v((function(t){return t.filter((function(t){return t.id!==e}))}))})).catch((function(e){return k((0,i.g)(e.data.message))})),k((0,i.F6)(!1))):"Show"===t&&(k((0,i.F6)(!0)),z({imageId:e}),k((0,i.F6)(!1)))};return r.createElement(o.J,null,h&&h.map((function(e){return r.createElement(s._,{key:e.id,menuOptionsHandlerCallback:Y,setImagePosition:C,idOfSelected:n,authorId:e.authorId,authorName:e.authorName,isOwn:e.isOwn,avatar:e.avatar,id:e.id,createdAt:e.createdAt,numberOfViews:e.numberOfViews,src:e.src,isLiked:e.isLiked,description:e.description,tags:e.tags,numberOfComments:e.numberOfComments,numberOfLikes:e.numberOfLikes,isPrivate:e.isPrivate,isSaved:e.isSaved})})))}))},3216:(e,t,n)=>{n.d(t,{F:()=>c});var r=n(6540),a=n(4540);const i={extra:{width:"35px"}};var c=function(e){var t=e.isSortingByPopularity,n=e.sortByToggleCallback;return r.createElement("div",{onClick:function(){n(t?"date":"popularity")}},t?r.createElement("div",{title:"Sort images by date"},r.createElement(a.p,{type:"star",extra:i.extra})):r.createElement("div",{title:"Sort images by popularity"},r.createElement(a.p,{type:"date",extra:i.extra})))}},1411:(e,t,n)=>{n.r(t),n.d(t,{default:()=>w});var r=n(4073),a=n(6540),i=n(8106),c=n(1469),u=n(9067),o=n(3216);const s={headerCenter:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"}};var l=function(e){var t=e.numberOf,n=e.isSortingByPopularity,i=e.sortByToggleCallback,c=e.children;return a.createElement(u.A,{sx:s.headerCenter},c,a.createElement(r.A,{variant:"body2"},t),a.createElement(o.F,{isSortingByPopularity:n,sortByToggleCallback:i}))},f=n(3222),d=n(7707),m=n(9119),g=n(5834),p=n(9753),h=n(5157);const v={tag:{fontSize:"30px"}},w=function(){var e=(0,a.useState)({count:"0",rows:[]}),t=e[0],n=e[1],u=(0,a.useState)({count:"0",rows:[]}),o=u[0],s=u[1],w=(0,a.useState)({count:"0",rows:[]}),E=w[0],y=w[1],x=(0,a.useState)(!1),b=x[0],k=x[1],F=+(0,i.g)().id.slice(1),S=(0,i.g)().name.slice(1),O=(0,p.j)(),C=(0,h.L)()[0];return(0,a.useEffect)((function(){O((0,g.F6)(!0)),C({tagId:F,sortBy:"date"}).unwrap().then((function(e){s((function(t){return e})),n((function(t){return e}))})).catch((function(e){return O((0,g.g)(e.data.message))})),O((0,g.F6)(!1))}),[]),a.createElement(c.R,null,a.createElement(m.T,{images:t.rows},a.createElement(f.z,null,a.createElement(d.F,null),a.createElement(d.F,null)),a.createElement(l,{numberOf:t.count,isSortingByPopularity:b,sortByToggleCallback:function(e){"date"===e?n((function(e){return o})):E.rows.length?n((function(e){return E})):(O((0,g.F6)(!0)),C({tagId:F,sortBy:"popularity"}).unwrap().then((function(e){y((function(t){return e})),n((function(t){return e}))})),O((0,g.F6)(!1))),k((function(e){return!e}))}},a.createElement(r.A,{sx:v.tag,variant:"body2"},"#",S))))}}}]);